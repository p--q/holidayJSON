var holidayJSON=holidayJSON||function(){function t(c,a,g,f,m,p){var e,h;if(c>=b.sY&&c<=b.eY)for(var d=a;d<=g;d++){h=f;var q=m;d==a&&d!=g?q=31:d!=a&&d==g?h=1:d!=a&&d!=g&&(h=1,q=31);var t=b.dic[c][d];h=1>h?1:h;e=(new Date(c,d+1,0)).getDate();q=q>e?e:q;for(e=h;e<=q;e++)p?(h=new Date(c,d,e),h.getDay()==b.daydic[p.toUpperCase()]&&(t.push(e),e+=6)):t.push(e);b.dic[c][d]=Array.from(new Set(t)).sort(function(c,a){return c<a?-1:1})}}function v(){var c=0,a;for(a in b.dic)for(var g=0;12>g;g++)c+=b.dic[a][g].length;
document.getElementById("date_count").textContent="\u5408\u8a08\u65e5\u6570: "+c}var b={daydic:{SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6},reD:/^()()([1-3]*\d)(Sun|Mon|Tue|Wed|Thu|Fri|Sat)*$/i,reM:/^()([1]*\d)\/([1-3]*\d)(Sun|Mon|Tue|Wed|Thu|Fri|Sat)*$/i,reY:/^(\d\d\d\d)\/([1]*\d)\/([1-3]*\d)(Sun|Mon|Tue|Wed|Thu|Fri|Sat)*$/i,dic:{},sY:null,eY:null},a={_resources:{NYD:{C:"New Year's Day",ja:"\u5143\u65e5",ja_kana:"\u304c\u3093\u3058\u3064"},CAD:{C:"Caming-of-Age Day",ja:"\u6210\u4eba\u306e\u65e5",
ja_kana:"\u305b\u3044\u3058\u3093\u306e\u3072"},EBD:{C:"The  Emperor's Birthday",ja:"\u5929\u7687\u8a95\u751f\u65e5",ja_kana:"\u3066\u3093\u306e\u3046\u305f\u3093\u3058\u3087\u3046\u3073"},CTD:{C:"Constitution Day",ja:"\u61b2\u6cd5\u8a18\u5ff5\u65e5",ja_kana:"\u3051\u3093\u307d\u3046\u304d\u306d\u3093\u3073"},CDD:{C:"Children's Day",ja:"\u3053\u3069\u3082\u306e\u65e5",ja_kana:"\u3053\u3069\u3082\u306e\u3072"},CLD:{C:"Culture Day",ja:"\u6587\u5316\u306e\u65e5",ja_kana:"\u3076\u3093\u304b\u306e\u3072"},
LTD:{C:"Labor Thanksgiving Day",ja:"\u52e4\u52b4\u611f\u8b1d\u306e\u65e5",ja_kana:"\u304d\u3093\u308d\u3046\u304b\u3093\u3057\u3083\u306e\u3072"},NFD:{C:"National Foundation Day",ja:"\u5efa\u56fd\u8a18\u5ff5\u306e\u65e5",ja_kana:"\u3051\u3093\u3053\u304f\u304d\u306d\u3093\u306e\u3072"},RAD:{C:"Respect-for-the-Aged Day",ja:"\u656c\u8001\u306e\u65e5",ja_kana:"\u3051\u3044\u308d\u3046\u306e\u3072"},HSD:{C:"Health and Sports Day",ja:"\u4f53\u80b2\u306e\u65e5",ja_kana:"\u305f\u3044\u3044\u304f\u306e\u3072"},
GRD:{C:"Greenery Day",ja:"\u307f\u3069\u308a\u306e\u65e5",ja_kana:"\u307f\u3069\u308a\u306e\u3072"},MRD:{C:"Marine Day",ja:"\u6d77\u306e\u65e5",ja_kana:"\u3046\u307f\u306e\u3072"},SWD:{C:"Showa Day",ja:"\u662d\u548c\u306e\u65e5",ja_kana:"\u3057\u3087\u3046\u308f\u306e\u3072"},MTD:{C:"Mountain Day",ja:"\u5c71\u306e\u65e5",ja_kana:"\u3084\u307e\u306e\u3072"},VED:{C:"Vernal Equinox Day",ja:"\u6625\u5206\u306e\u65e5",ja_kana:"\u3057\u3085\u3093\u3076\u3093\u306e\u3072"},AED:{C:"Autumn Equinox Day",ja:"\u79cb\u5206\u306e\u65e5",
ja_kana:"\u3057\u3085\u3046\u3076\u3093\u306e\u3072"},NH:{C:"National Holidy",ja:"\u56fd\u6c11\u306e\u4f11\u65e5",ja_kana:"\u3053\u304f\u307f\u3093\u306e\u304d\u3085\u3046\u3058\u3064"},HL:{C:"A holiday in lieu",ja:"\u632f\u66ff\u4f11\u65e5",ja_kana:"\u3075\u308a\u304b\u3048\u304d\u3085\u3046\u3058\u3064"},NY:{C:"New Year's Holiday",ja:"\u5e74\u672b\u5e74\u59cb",ja_kana:"\u306d\u3093\u307e\u3064\u306d\u3093\u3057"}},_lc:"ja",Result:function(c,a){this.id=c;this.md=a}};a.Result.prototype.getText=function(c){if(null==
this.id)return null;var l=a._resources[this.id];if(null!=l){if(null!=l[c])return l[c];if(null!=l[a._lc])return l[a._lc];if(null!=l.C)return l.C}return this.id};a.Entry=function(c,a,b,f){this.id=c;this.ystart=a;this.yend=b;this.m=f};a.Entry.prototype.hit=function(c,a){return a==this.m&&(null==this.ystart||c>=this.ystart)&&(null==this.yend||c<=this.yend)};a.Entry.prototype.calc=function(c,a){return null};a.FixedEntry=function(c,b,g,f,m){a.Entry.call(this,c,b,g,f);this.md=m};a.FixedEntry.prototype=new a.Entry;
a.FixedEntry.prototype.calc=function(c,b){return new a.Result(this.id,this.md)};a.WdayEntry=function(c,b,g,f,m,p){a.Entry.call(this,c,b,g,f);this.week=m;this.wday=p};a.WdayEntry.prototype=new a.Entry;a.WdayEntry.prototype.calc=function(c,b){var g=this.id,f=a.calcFirstWday(c,b);return new a.Result(g,7*this.week+(7+this.wday-f)%7-6)};a.VernalEquinoxEntry=function(c,b){a.Entry.call(this,"VED",c,b,2)};a.VernalEquinoxEntry.prototype=new a.Entry;a.VernalEquinoxEntry.prototype.calc=function(c,b){var g=this.id,
f;f=1980>c?1960<=c&&0==c%4?20:21:parseInt(20.8431+.242194*(c-1980))-parseInt((c-1980)/4);return new a.Result(g,f)};a.AutumnEquinoxEntry=function(c,b){a.Entry.call(this,"AED",c,b,8)};a.AutumnEquinoxEntry.prototype=new a.Entry;a.AutumnEquinoxEntry.prototype.calc=function(c,b){var g=this.id,f;f=1980>c?0==(c-3)%4?24:23:parseInt(23.2488+.242194*(c-1980))-parseInt((c-1980)/4);return new a.Result(g,f)};a.entries=[new a.FixedEntry("NYD",1949,null,0,1),new a.FixedEntry("CAD",1949,1999,0,15),new a.VernalEquinoxEntry(1949,
null),new a.FixedEntry("EBD",1949,1988,3,29),new a.FixedEntry("CTD",1949,null,4,3),new a.FixedEntry("CDD",1949,null,4,5),new a.AutumnEquinoxEntry(1948,null),new a.FixedEntry("CLD",1948,null,10,3),new a.FixedEntry("LTD",1948,null,10,23),new a.FixedEntry("NFD",1966,null,1,11),new a.FixedEntry("RAD",1966,2002,8,15),new a.FixedEntry("HSD",1966,1999,9,10),new a.FixedEntry("GRD",1989,2006,3,29),new a.FixedEntry("EBD",1989,null,11,23),new a.FixedEntry("MRD",1996,2002,6,20),new a.WdayEntry("CAD",2E3,null,
0,2,1),new a.WdayEntry("HSD",2E3,null,9,2,1),new a.WdayEntry("MRD",2003,null,6,3,1),new a.WdayEntry("RAD",2003,null,8,3,1),new a.FixedEntry("SWD",2007,null,3,29),new a.FixedEntry("GRD",2007,null,4,4),new a.FixedEntry("MTD",2016,null,7,11),null];a._mdays=[31,28,31,30,31,30,31,31,30,31,30,31];a.calcMJD=function(c,a,b){1>=a&&(c--,a+=12);return Math.floor(365.25*c)+Math.floor(c/400)-Math.floor(c/100)+Math.floor(30.59*(a-1))+b-678912};a.calcFirstWday=function(c,b){return(a.calcMJD(c,b,1)+3)%7};a.calcMdays=
function(c,b){return 1!=b||0!=c%4||0==c%100&&0!=c%400?a._mdays[b]:29};a.calculate=function(c,b,g){if(!(1948<=c&&0<=b&&11>=b))return null;for(var f=[],m=a.calcFirstWday(c,b),p=a.calcMdays(c,b),e=0;e<a.entries.length;e++){var h=a.entries[e];null!=h&&h.hit(c,b)&&(h=h.calc(c,b),null!=h&&(f[h.md]=h))}if(1973<c||(c=3<=b))for(e=7-m+1;e<=p;e+=7)if(null!=f[e])for(var h=!1,d=e+1;!h&&d<=p;d++)null==f[d]&&0!=(d+m-1)%7&&(f[d]=new a.Result("HL",d),e=d,h=!0);if(1986<=c)for(e=1;e<=p-2;e++)null!=f[e]&&"HL"!=f[e].id&&
null==f[e+1]&&null!=f[e+2]&&"HL"!=f[e+2].id&&(e+1+m-1)%7&&(f[e+1]=new a.Result("NH",e+1),e+=1);if(1==g)if(0==b)for(e=1;3>=e;e++)0!=(e+m-1)%7&&null==f[e]&&(f[e]=new a.Result("NY",e));else if(11==b)for(e=29;31>=e;e++)0!=(e+m-1)%7&&null==f[e]&&(f[e]=new a.Result("NY",e));c=[];for(e=1;e<=p;e++)null!=f[e]&&c.push(f[e]);return c};return{getJSON:function(){var c=parseInt(document.getElementById("startY").value),l=parseInt(document.getElementById("endY").value);for(b.dic={};c<=l;c++){b.dic[c]=[];for(var g=
0;12>g;g++){var f=[];a.calculate(c,g).forEach(function(a){f.push(a.md)});b.dic[c].push(f)}2017==c&&(b.dic[c][0].push(2),b.dic[c][0]=Array.from(new Set(b.dic[c][0])).sort(function(a,c){return a<c?-1:1}))}l=JSON.stringify(b.dic);document.holiday.msg.value=l;v()},clpCopy:function(){document.getElementById("msg").select();document.execCommand("copy")},emptyJSON:function(){var a=parseInt(document.getElementById("startY").value),l=parseInt(document.getElementById("endY").value);for(b.dic={};a<=l;a++){b.dic[a]=
[];for(var g=0;12>g;g++)b.dic[a][g]=[]}l=JSON.stringify(b.dic);document.holiday.msg.value=l;v()},addDate:function(){var a,l,g,f,m,p,e,h,d,q;b.dic=JSON.parse(document.getElementById("msg").value);var u=Object.keys(b.dic);b.sY=Math.min.apply(null,u);b.eY=Math.max.apply(null,u);document.getElementById("added").value.split(",").forEach(function(r){r=r.trim();if(-1!=r.indexOf("-"))switch(r=r.split("-"),a=r[0].trim(),m=r[1].trim(),!0){case b.reD.test(a):f=parseInt(b.reD.exec(a)[1]);d=b.reD.exec(m);h=parseInt(d[3]);
for(k=b.sY;k<=b.eY;k++)for(n=0;11>=n;n++)t(k,n,n,f,h,d[4]);break;case b.reM.test(a):d=b.reM.exec(a);g=parseInt(d[2])-1;f=parseInt(d[3]);b.reD.test(m)?(d=b.reD.exec(m),e=g,h=parseInt(d[3])):b.reM.test(m)&&(d=b.reM.exec(m),e=parseInt(d[2])-1,h=parseInt(d[3]));for(k=b.sY;k<=b.eY;k++)t(k,g,e,f,h,d[4]);break;case b.reY.test(a):if(d=b.reY.exec(a),l=parseInt(d[1]),g=parseInt(d[2])-1,f=parseInt(d[3]),b.reY.test(m)?(d=b.reY.exec(m),p=parseInt(d[1]),e=parseInt(d[2])-1,h=parseInt(d[3])):b.reM.test(m)?(d=b.reM.exec(m),
p=l,e=parseInt(d[2])-1,h=parseInt(d[3])):b.reD.test(m)&&(d=b.reD.exec(m),p=l,e=g,h=parseInt(d[3])),l==p)t(l,g,e,f,h,d[4]);else if(l<p)for(var k=l;k<=p;k++)k==l?t(k,g,11,f,31,d[4]):k==p?t(k,0,e,1,h,d[4]):t(k,0,11,1,31,d[4])}else if(r.toUpperCase()in b.daydic)for(k=b.sY;k<=b.eY;k++)for(var n=0;12>n;n++)t(k,n,n,1,31,r);else switch(!0){case b.reD.test(r):d=b.reD.exec(r);q=parseInt(d[3]);for(k=b.sY;k<=b.eY;k++)for(n=0;11>=n;n++)t(k,n,n,q,q,d[4]);break;case b.reM.test(r):d=b.reM.exec(r);n=parseInt(d[2])-
1;q=parseInt(d[3]);for(k=b.sY;k<=b.eY;k++)t(k,n,n,q,q,d[4]);break;case b.reY.test(r):d=b.reY.exec(r),k=parseInt(d[1]),n=parseInt(d[2])-1,q=parseInt(d[3]),t(k,n,n,q,q,d[4])}});u=JSON.stringify(b.dic);document.holiday.msg.value=u;v()}}}();
